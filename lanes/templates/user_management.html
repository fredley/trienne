{% extends "base.html" %}

{% block title %}User Management{% endblock %}

{% block main_content %}
<div class="container">
  <legend>User manangement for {{ org }}</legend>

  <div class="list-group">
    <div class="list-group-item">
      <div class="form-inline">
        <div class="form-group">
          <label for="id_email">Invite someone to {{ org.name }}:</label>
          <input class="form-control" type="email" name="email" placeholder="Email Address..." id="id_email">
        </div>
        <div class="form-group">
          <button type="button" class="btn btn-primary" id="send-invite">Send Invite</button>
        </div>
      </div>
    </div>
    {% for u in org.users %}
      <div class="list-group-item">
        <div class="col-xs-10"><a href="{% url 'user_profile' u.id %}">{{ u.username }}</a></div>
        <div class="cols-xs-2">
          <button class="btn btn-sm btn-danger"><i class="glyphicon glyphicon-trash"></i> Delete</button>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock main_content %}

{% block script_panel %}
<script type="text/javascript">
  $(document).ready(function(){
    $('#send-invite').on('click',function(){
      $.ajax({
        method: "post",
        url: "{% url 'manage_users' %}",
        data: {
          email: $('#id_email').val(),
          organisation: {{ org.id }}
        },
        success:function(){
          $('#id_email').val();
        }
      });
    });
  });
</script>
{% endblock %}
